<!DOCTYPE html>
<html lang="en">

    <%- include('./partials/head.ejs')%>

<body>

    <%- include('./partials/nav.ejs') %>

    <div class="blogs content">
        <h1><%= blog.title %></h1>
        <h2><%= blog.snippet %></h2>
        <h3><%= blog.body %></h3>
    </div>
    <a class="delete" data-doc="<%= blog._id %>">Delete</a>

    <script>
        const toDelete = document.querySelector('a.delete');
        toDelete.addEventListener("click",e=>{
            const endpoint = `/blogs/${toDelete.dataset.doc}`;

            fetch(endpoint,{method:"DELETE"})
            .then(response => response.json())
            .then(data => window.location.href = data.redirect)
            .catch(err => console.log(err));
        });
    </script>

</body>

</html>